# 一、医院设置-批量删除

## 1、定义api

 src/api/yygh/hospset.js

```js
removeRows(idList) {
    return request({
        url: `${api_name}/delBatch`,
        method: 'delete',
        data: idList
    })
}

```

## 2、初始化组件

src/views/yygh/hospset/list.vue

在table组件上添加 **批量删除 按钮**

```js
<!-- 工具条 -->
<div>
   <el-button type="danger" size="mini" @click="removeRows()">批量删除</el-button>
</div>
```

**在table组件上添加复选框**

```js
<el-table
:data="list" stripe style="width: 100%" @selection-change="handleSelectionChange">
   <el-table-column type="selection" width="55"/>
```

## 3、实现新增功能

data定义数据

```js
multipleSelection: [] // 批量选择中选择的记录列表
```

完善方法

```js
// 当表格复选框选项发生变化的时候触发
handleSelectionChange(selection) {
  this.multipleSelection = selection
},

//批量删除
removeRows() {
   this.$confirm('此操作将永久删除医院是设置信息, 是否继续?', '提示', {
      confirmButtonText: '确定',
      cancelButtonText: '取消',
      type: 'warning'
   }).then(() => { //确定执行then方法
      var idList = []
      //遍历数组得到每个id值，设置到idList里面
      for(var i=0;i<this.multipleSelection.length;i++) {
         var obj = this.multipleSelection[i]
         var id = obj.id
         idList.push(id)
      }
      //调用接口
      hospset.removeRows(idList)
         .then(response => {
            //提示
            this.$message({
               type: 'success',
               message: '删除成功!'
            })
            //刷新页面
            this.fetchData(1)
         })
   })
}
```

# 二、医院锁定

## 1、定义api

 src/api/yygh/hospset.js

```js
//锁定和取消锁定
lockHospSet(id,status) {
  return request ({
    url: `/admin/hosp/hospitalSet/lockHospitalSet/${id}/${status}`,
    method: 'put'
  })
}
```

## 2、修改table组件

在list.vue页面添加 锁定和取消锁定按钮

```js
<el-table-column label="操作" width="280" align="center">
   <template slot-scope="scope">
      <el-button type="danger" size="mini" 
         icon="el-icon-delete" @click="removeDataById(scope.row.id)">删除</el-button>
      <el-button v-if="scope.row.status==1" type="primary" size="mini" 
         icon="el-icon-delete" @click="lockHostSet(scope.row.id,0)">锁定</el-button>
      <el-button v-if="scope.row.status==0" type="danger" size="mini" 
         icon="el-icon-delete" @click="lockHostSet(scope.row.id,1)">取消锁定</el-button>
   </template>
</el-table-column>

```

## 3、编写调用方法

```js
//锁定和取消锁定
lockHostSet(id,status) {
   hospset.lockHospSet(id,status)
      .then(response => {
         //刷新
         this.fetchData()
      })
},
```
